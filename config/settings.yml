# Chargeback Forecasting Configuration

# Data Pipeline Settings
data_pipeline:
  # Data cleaning parameters
  cleaning:
    missing_threshold: 0.5  # Maximum proportion of missing values allowed
    outlier_std: 3          # Standard deviations for outlier detection
    duplicate_check: true
    
  # Feature engineering parameters
  feature_engineering:
    lag_periods: [1, 7, 14, 30]
    rolling_windows: [7, 14, 30, 90]
    create_time_features: true
    create_interactions: true

# Model Configuration
models:
  # Baseline models
  baseline:
    moving_average:
      window: 7
    weighted_moving_average:
      window: 7
    seasonal_naive:
      season_length: 7
      
  # Machine learning models
  ml:
    random_forest:
      n_estimators: 100
      max_depth: 10
      min_samples_split: 5
      min_samples_leaf: 2
      random_state: 42
      n_jobs: -1
      
    xgboost:
      n_estimators: 100
      max_depth: 6
      learning_rate: 0.1
      subsample: 0.8
      colsample_bytree: 0.8
      random_state: 42
      n_jobs: -1
      
    lightgbm:
      n_estimators: 100
      max_depth: -1
      learning_rate: 0.1
      num_leaves: 31
      min_child_samples: 20
      random_state: 42
      n_jobs: -1
      
  # Ensemble configuration
  ensemble:
    method: 'mean'  # Options: 'mean', 'median', 'weighted'
    models: ['random_forest', 'xgboost', 'lightgbm']

# Evaluation Settings
evaluation:
  # Metrics to compute
  metrics:
    - mae
    - rmse
    - mape
    - r2
    - mase
    - smape
    - accuracy_5
    - accuracy_10
    
  # Cross-validation settings
  cross_validation:
    n_splits: 5
    test_size: 0.2
    shuffle: false  # Time series - don't shuffle
    
  # Business thresholds
  thresholds:
    accuracy_target: 0.90  # 90% within threshold
    mape_target: 10.0      # 10% MAPE target
    rmse_target: 100.0     # RMSE target

# Forecasting Settings
forecasting:
  horizon: 30               # Days to forecast
  confidence_level: 0.95    # For prediction intervals
  update_frequency: 'daily'
  
# Business Rules
business_rules:
  min_chargeback_amount: 0.01
  max_chargeback_amount: 100000
  alert_threshold: 1000
  high_risk_threshold: 5000

# Paths and Data
paths:
  data_dir: 'data/'
  model_dir: 'models/'
  output_dir: 'output/'
  logs_dir: 'logs/'

# Logging
logging:
  level: 'INFO'  # Options: DEBUG, INFO, WARNING, ERROR
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  file: 'logs/chargeback_forecasting.log'

# Performance
performance:
  parallel_processing: true
  n_jobs: -1
  batch_size: 1000
  cache_enabled: true
